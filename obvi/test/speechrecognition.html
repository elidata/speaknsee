<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

  <script>
    var WCT = {
      waitForFrameworks: false
    }
  </script>

  <script src="../../web-component-tester/browser.js"></script>
  <link rel="import" href="../voice-button.html">
</head>
<body>
  
  <voice-button id="fixture" cloud-speech-api-key="AIzaSyAkUDloJwxS5jouGnY43tcQ2VaArZQcyRM"></voice-button>

  <script>

    suite('<voice-button>', function() {
      var myEl;

      const SpeechRecognition = window['SpeechRecognition'] ||
                                window['webkitSpeechRecognition'] ||
                                window['mozSpeechRecognition'] ||
                                window['msSpeechRecognition'] ||
                                window['oSpeechRecognition'];

      setup(function(){
        myEl = document.getElementById('fixture');
      })


      test('speech recognition support', function(done) {
        
        setTimeout(function(){
          assert.isOk(true);
          done();
        }, 3000);
        
        myEl.addEventListener('onSpeechRecognitionUnsupported', function(event){
          assert.isOk(typeof SpeechRecognition === 'undefined', 'Browser does not support Speech Recognition');
          done();
        });

      });
    });
  </script>
</body>
</html>